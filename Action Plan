# Login
oc login 

# Switch to prod namespace
oc project php-epo-prod

# Check current image (for rollback reference)
oc get istag epo-prod:latest -n php-epo-prod -o jsonpath="{.image.dockerImageReference}"

# Start new build from current folder
oc start-build epo-prod --from-dir=. --follow -n php-epo-prod

# Confirm new image
oc get istag epo-prod:latest -n php-epo-prod -o jsonpath="{.image.dockerImageReference}"

# Restart deployment (if not auto-triggered)
oc rollout restart deployment/epo-prod -n php-epo-prod
oc rollout status  deployment/epo-prod -n php-epo-prod

# Verify pods
oc get pods -n php-epo-prod -o wide

# Check pod image (replace <pod-name> with new pod)
oc get pod <pod-name> -n php-epo-prod -o jsonpath="{.spec.containers[0].image}"

# Tail logs
oc logs -f deployment/epo-prod -n php-epo-prod




âš¡ Rollback if needed:

oc rollout undo deployment/epo-prod -n php-epo-prod
